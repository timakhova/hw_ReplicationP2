# Домашнее задание к занятию «Репликация и масштабирование. Часть 2» Тимахова Наталья

# Задание 1

Активный master-сервер и пассивный репликационный slave-сервер.

При таком методе масштабирования активный master-сервер выполняет все операции записи и модификации данных, а slave-сервер получает и хранит копию данных. Основные преимущества включают:

Повышение надежности: Пассивный slave-сервер позволяет создать резервную копию данных, которая может быть использована в случае сбоя master-сервера. Это повышает отказоустойчивость системы, так как slave-сервер может быстро взять на себя роль основного сервера.

Уменьшение нагрузки на master-сервер: slave-сервер может выполнять задачи только на чтение, что помогает снизить нагрузку на master-сервер, освобождая его ресурсы для операций записи и других интенсивных операций.

Быстрое восстановление: При сбое master-сервера, переключение на slave-сервер происходит быстрее, так как он уже содержит актуальную копию данных. Это снижает простой системы.

Master-сервер и несколько slave-серверов.

В данной конфигурации master-сервер управляет всеми операциями записи, а несколько slave-серверов реплицируют данные и обрабатывают запросы на чтение. Преимущества этой архитектуры:

Горизонтальное масштабирование чтения: Добавление дополнительных slave-серверов позволяет равномерно распределять нагрузку на чтение по всем серверам. Это полезно для приложений с высокой нагрузкой на чтение, так как запросы распределяются на несколько серверов, уменьшая время отклика и увеличивая производительность системы.

Отказоустойчивость и балансировка нагрузки: При выходе из строя одного из slave-серверов, остальные могут продолжить обслуживание запросов на чтение. Это делает систему более устойчивой к отказам отдельных компонентов.

Возможность географического распределения: Slave-серверы можно размещать в разных регионах, что уменьшает задержки для пользователей, находящихся в разных частях мира.

# Задание 2

План по выполнению горизонтального и вертикального шаринга базы данных

1. Определение целей шардинга:

Горизонтальный шардинг используется для распределения данных по нескольким серверам, уменьшая нагрузку на отдельные серверы и обеспечивая их масштабируемость.

Вертикальный шардинг подразумевает разделение таблиц или групп столбцов на разные серверы, чтобы распределить нагрузку на чтение и запись, улучшить производительность и упростить управление данными.

Принципы построения системы и разграничение между базами данных

Горизонтальный шардинг

Таблица пользователи:

Шардинг по ID пользователя — мы разделяем таблицу на основе диапазона или хэширования user_id. Например:

Сервер 1: хранит пользователей с user_id от 1 до 1,000,000.

Сервер 2: хранит пользователей с user_id от 1,000,001 до 2,000,000.

Режим работы серверов:

Сервера работают в режиме master-slave, где мастер-сервер отвечает за запись, а реплики (slave-сервера) обрабатывают запросы на чтение для оптимизации производительности.

Таблица книги:

Шардинг по жанру или автору — для распределения книг можно использовать жанр или инициалы автора, если распределение данных будет равномерным.

Сервер 1: хранит книги жанра "Фантастика" и "Детектив".

Сервер 2: хранит книги жанра "Роман" и "Приключения".

Режим работы серверов:

Сервера работают в режиме master-master, так как каждому серверу назначена определённая часть данных, и они управляют только своими шардовыми данными. Это снижает количество конфликтов при записи и позволяет параллельно обрабатывать разные типы данных.

Таблица магазины:

Горизонтальный шардинг по географическому положению — данные о магазинах могут быть разбиты на серверы в зависимости от регионов или стран.

Сервер 1: хранит магазины региона "Север".

Сервер 2: хранит магазины региона "Юг".

Режим работы серверов:

master-slave режим для обеспечения оптимальной производительности при операциях чтения.

Вертикальный шардинг

Для увеличения производительности и распределения нагрузки на чтение/запись можно выделить несколько отдельных баз данных для конкретных функций:

База данных user_data для таблицы пользователи

Хранит только данные о пользователях, которые часто меняются или требуют высоких прав доступа.

Работает в режиме master-slave для увеличения отказоустойчивости и распределения нагрузки на чтение.

База данных book_data для таблицы книги

Хранит все данные о книгах, включая метаданные, и работает в режиме master-master для распределения операций на чтение и запись между разными серверами.

База данных store_data для таблицы магазины

Хранит данные о магазинах, а также включает операции с запасами, скидками и т.д.

Работает в режиме master-slave для быстрой обработки большого количества запросов на чтение.

![horizshard](https://github.com/timakhova/hw_ReplicationP2/blob/main/2-horizshard.png)

![vertshard](https://github.com/timakhova/hw_ReplicationP2/blob/main/2-vertshard.png)
